<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CopyCrafter - AI Marketing Copy Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 600px;
      margin: 80px auto;
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      color: #048b16;
    }

    form label {
      font-weight: bold;
      display: block;
      margin-top: 20px;
    }

    form input[type="text"],
    form button,
    form select,
    form input[type="range"] {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 16px;
      box-sizing: border-box;
    }

    form button {
      background-color: #007bff;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
      margin-top: 20px;
      width: auto;
      padding: 10px 20px;
    }

    form button:hover {
      background-color: #0056b3;
    }

    .result {
      background: #eaf7ea;
      padding: 20px;
      margin-top: 30px;
      border-radius: 8px;
      border-left: 6px solid #28a745;
      white-space: pre-wrap;
      position: relative;
    }

    /* Dark mode styles */
    body.dark-mode {
      background-color: #1e1e1e;
      color: #f1f1f1;
    }
    body.dark-mode .container {
      background-color: #2c2c2c;
      box-shadow: none;
    }
    body.dark-mode input,
    body.dark-mode select,
    body.dark-mode button {
      background-color: #3a3a3a;
      color: white;
      border: 1px solid #555;
    }
    body.dark-mode .result {
      background-color: #264d26;
      border-color: #6abd6a;
      color: #e1f3e1;
    }

    /* Dark mode toggle label */
    #darkToggleLabel {
      display: flex;
      align-items: center;
      margin-top: 20px;
      cursor: pointer;
      user-select: none;
    }
    #darkToggle {
      margin-right: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>CopyCrafter</h1>
    <p style="text-align: center; color: #666;">Generate persuasive marketing copy with AI</p>

    <label id="darkToggleLabel" for="darkToggle">
      <input type="checkbox" id="darkToggle" onchange="toggleDarkMode()" />
      Dark Mode
    </label>

    <form method="POST">
      <label for="product">Product Name:</label>
      <input type="text" id="product" name="product" required />

      <label for="tone">Tone of Voice:</label>
      <select id="tone" name="tone" required>
        <option value="">-- Select tone --</option>
        <option value="exciting">Exciting</option>
        <option value="professional">Professional</option>
        <option value="casual">Casual</option>
        <option value="funny">Funny</option>
        <option value="dramatic">Dramatic</option>
      </select>

      <label for="creativity">Creativity Level:</label>
      <input type="range" id="creativity" name="creativity" min="0.5" max="1.5" step="0.1" value="1" />
      <small>
    Lower = Precise and conventional content<br>
    Higher = Imaginative and bold content
</small>

      <label for="audience">Target Audience:</label>
      <input
        type="text"
        id="audience"
        name="audience"
        placeholder="e.g., students, moms, business owners"
        required
      />

      <button type="button" onclick="fillExample()">üé≤ Try an Example</button>
      <button type="submit">Generate Copy</button>
    </form>

    {% if result %}
    <div class="result">
      <h3>AI-Generated Copy:</h3>
      <p id="copyText">{{ result }}</p>
      <button onclick="copyToClipboard()">üìã Copy to Clipboard</button>
      <button onclick="regenerate()">üîÅ Regenerate</button>
      <button onclick="exportToPDF()">üìÑ Export to PDF</button>
    </div>
    {% endif %}
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    function copyToClipboard() {
      const text = document.getElementById("copyText").innerText;
      navigator.clipboard.writeText(text)
        .then(() => alert("Copied to clipboard!"))
        .catch(() => alert("Failed to copy."));
    }

    function regenerate() {
      // Simply resubmit the form
      document.querySelector("form").submit();
    }

    function exportToPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const text = document.getElementById("copyText").innerText;

    const pageWidth = doc.internal.pageSize.getWidth();
    const margin = 10;
    const maxLineWidth = pageWidth - margin * 1;

    // Wrap text to fit within page margins
    const lines = doc.splitTextToSize(text, maxLineWidth);

    doc.setFontSize(12);
    doc.text(lines, margin, 20); // Start text 20 units from top with margin on sides
    doc.save("marketing-copy.pdf");
}

    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
    }

    function fillExample() {
      document.getElementById("product").value = "Eco-friendly reusable water bottle";
      document.getElementById("tone").value = "exciting";
      document.getElementById("audience").value = "fitness enthusiasts";
      document.getElementById("creativity").value = 1;
    }
     // Enable dark mode if previously enabled
    window.onload = function () {
        const darkModeEnabled = localStorage.getItem('darkMode') === 'true';
        if (darkModeEnabled) {
            document.body.classList.add('dark-mode');
            document.getElementById("darkToggle").checked = true;
        }
    };

    function toggleDarkMode() {
        const isDark = document.getElementById("darkToggle").checked;
        document.body.classList.toggle('dark-mode', isDark);
        localStorage.setItem('darkMode', isDark); // Save user preference
    }
  </script>

</body>
</html>


